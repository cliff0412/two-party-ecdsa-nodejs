import BN from 'bn.js';
import { modInverse } from './bnUtil';
import { bnFromHexString } from './desearilization';
import { bnToHexString } from './serialization';

describe("bnUtil.test", () => {
    // TODO: 
    it("modInverse", () => {
        const N = new BN("13", 10)
        const input = new BN("5", 10);
        expect(bnToHexString(modInverse(input, N))).toEqual("08")
        expect(bnToHexString(modInverse(N, input))).toEqual("02")

        const N1 = bnFromHexString("00cf00f84055788480bcbf7eb13bdc0a0e37bcf4e5f4079f34dcae501c2e68958dd02e1cc71bf388e70413f0a7fc77467831f1e73e5dbe92bafccdcc07c632f118b601886b55bb6a524b7a1eb501d7f3f769624c55cabbd5b802e5d6127778116089adc2971356350afa0f00ce372c2efae914147e991bff5ec320ebb2e19c1efd61ea10636d492691b4e58c4ba87ba5f60ebf3e6848907df7ee05fdffbd36d003343976a0ae077b9272df0f5cacd983ae29179e46aa33f1b939f978ad2309db89c04406904993976c20f159b92d100bc0475969e627412c977e9b1b177ccc9e4f4051a1c2efaee2f7be285e1bf8cf042ed72154bd035d5ed07a84e479696b4710");
        const res1 = modInverse(N, N1);

        expect(bnToHexString(res1)).toEqual(
            '8f4f70ca13c996cf479844048be71aa761aa33641f18f810e78c5ed86ee5f1622da9c527621ec13d78fa1cc3113ee2047158b3c8b70dc80b4c8e798f3a72095fe077370f3b5a5d4caa683ca4b281d048d2cde61402820a1cee5059207a180c07c1c7108ff9b1d5f3e831c57b12810cd517840e30429d3aa410ef6819611d508808b5bc939a6db83d7d3c74d1eacbc1aa58fa8daaa86408709117d73ae574b764ae0065d1b38f06c7d95f59678b5b828c43d54630ebfc93a79e4a3fda535597fce7918e63e42b1a0fc8098ce2a90b1bd3e2a05d01cc68329043f53a23f3f01ed4679af9d5b9a075bf34e0deb0e7543df90b171347c740a41a2d6fb1dde6855895'
        )

        // const N2 = bnFromHexString("00cf00f84055788480bcbf7eb13bdc0a0e37bcf4e5f4079f34dcae501c2e68958dd02e1cc71bf388e70413f0a7fc77467831f1e73e5dbe92bafccdcc07c632f118b601886b55bb6a524b7a1eb501d7f3f769624c55cabbd5b802e5d6127778116089adc2971356350afa0f00ce372c2efae914147e991bff5ec320ebb2e19c1eff2ea9b0f34104990bb126f830ffb1b1d98d1bd30cf6d2eea66d55f31ff3a8ff6b6f54579f862a74ce8f53a5e23815b21fd552dc55ad1cc3387831a360317c3529ec8eab177b67d4f8461a8c1d144ee9e243922a0b78a3c944fad80ea7eab637cb1b2cc64bf1e60c59e296cdbc765c71ab8353f64e72289d19d6ae4401ef90dd03");
        // const res2 = modInverse(N1, N2);
        // console.log(bnToHexString(res2))
        // 009bede35961a21d7df2c0b631e7fe72cb8dfb51b5d3c00c6fbfe570e7ec92e82942e8125ca8bcbd82a6ba4e6aa527d80629a623906ba0cd31c866f91aa11dc9182f37ad748bcac0692612f7c4a125c6b891101f5fa23a01cc6048e42e4fd8b397a4483c6e012547fae69ca08218560fa4b6dffdb77807d72d32b22783a1fe80cb1708cbeaa86b39804a92017adf12aec3372951eade6deb3564aba8bbbc5e7b47340dc2978601571e757f040560bf384dede49ba8716829542b2163703468ca366bd8d0db339e345b5afd2bb927d25081fa629ead8d52620e5bea0133151046b1957d3e3a2ea91a087cdafca9ff252bba63dd47294336a0093c580e2bc8b9789b
    })
})